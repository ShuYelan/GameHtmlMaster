<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±äº¬ãƒŸãƒƒãƒ‰ãƒŠã‚¤ãƒˆæ®ºäººäº‹ä»¶</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Noto+Serif+JP:wght@400;600&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-dark: #0a0e27;
            --secondary-dark: #1a1f3a;
            --accent-gold: #d4af37;
            --accent-red: #8b0000;
            --text-light: #e8e8e8;
            --text-dim: #a0a0a0;
            --border-color: #2a2f4a;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--secondary-dark) 100%);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .background-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,.03) 2px, rgba(255,255,255,.03) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255,255,255,.03) 2px, rgba(255,255,255,.03) 4px);
            pointer-events: none;
            z-index: 1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            border-bottom: 2px solid var(--accent-gold);
            margin-bottom: 40px;
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 10px;
        }

        h1 {
            font-family: 'Noto Serif JP', serif;
            font-size: 3em;
            font-weight: 600;
            color: var(--accent-gold);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            letter-spacing: 0.1em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1em;
            color: var(--text-dim);
            letter-spacing: 0.2em;
        }

        .intro-screen, .game-screen {
            background: rgba(26, 31, 58, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 40px;
            border: 1px solid var(--border-color);
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }

        .intro-content {
            max-width: 800px;
            margin: 0 auto;
            line-height: 2;
        }

        .intro-content p {
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .victim-info {
            background: rgba(139, 0, 0, 0.2);
            border-left: 4px solid var(--accent-red);
            padding: 20px;
            margin: 30px 0;
            border-radius: 5px;
        }

        .start-btn {
            display: block;
            margin: 40px auto 0;
            padding: 15px 60px;
            background: linear-gradient(135deg, var(--accent-gold) 0%, #b8941f 100%);
            color: var(--primary-dark);
            border: none;
            border-radius: 50px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }

        .game-screen {
            display: none;
        }

        .suspects-panel {
            background: rgba(10, 14, 39, 0.6);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
            margin-bottom: 20px;
        }

        .suspects-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
        }

        .suspect-card {
            background: rgba(26, 31, 58, 0.8);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .suspect-card:hover {
            border-color: var(--accent-gold);
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(212, 175, 55, 0.3);
        }

        .suspect-card.active {
            border-color: var(--accent-gold);
            background: rgba(212, 175, 55, 0.1);
        }


        .suspect-name {
            font-size: 1em;
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--accent-gold);
        }

        .suspect-role {
            font-size: 0.85em;
            color: var(--text-dim);
        }

        .game-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
        }

        .main-panel {
            background: rgba(10, 14, 39, 0.6);
            border-radius: 10px;
            padding: 30px;
            border: 1px solid var(--border-color);
        }

        .right-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .evidence-panel {
            background: rgba(10, 14, 39, 0.6);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
            max-height: 600px;
            overflow-y: auto;
            flex: 1;
        }

        .panel-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--accent-gold);
            color: var(--accent-gold);
        }

        .suspect-detail {
            display: none;
        }

        .suspect-detail.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .detail-section {
            margin-bottom: 30px;
        }

        .detail-section h3 {
            color: var(--accent-gold);
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .detail-section p, .detail-section li {
            line-height: 1.8;
            margin-bottom: 10px;
        }

        .alibi-box {
            background: rgba(26, 31, 58, 0.6);
            border-left: 3px solid var(--accent-gold);
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .question-btn {
            background: rgba(212, 175, 55, 0.2);
            border: 1px solid var(--accent-gold);
            color: var(--text-light);
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .question-btn:hover {
            background: rgba(212, 175, 55, 0.3);
        }

        .question-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .answer-box {
            background: rgba(26, 31, 58, 0.8);
            border-left: 3px solid var(--accent-red);
            padding: 15px;
            margin-top: 10px;
            border-radius: 5px;
            display: none;
        }

        .answer-box.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .evidence-item {
            background: rgba(26, 31, 58, 0.8);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .evidence-item.new {
            border-color: var(--accent-gold);
            animation: pulse 2s ease;
        }

        @keyframes pulse {
            0%, 100% { border-color: var(--accent-gold); }
            50% { border-color: var(--accent-red); }
        }

        .evidence-title {
            color: var(--accent-gold);
            font-weight: 600;
            margin-bottom: 10px;
        }

        .accusation-panel {
            background: rgba(139, 0, 0, 0.2);
            border: 2px solid var(--accent-red);
            border-radius: 10px;
            padding: 20px;
        }

        .accusation-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, var(--accent-red) 0%, #660000 100%);
            color: var(--text-light);
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .accusation-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 0, 0, 0.4);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, var(--secondary-dark) 0%, var(--primary-dark) 100%);
            margin: 5vh auto;
            padding: 40px;
            border: 2px solid var(--accent-gold);
            border-radius: 15px;
            width: 95%;
            max-width: 1100px;
            box-shadow: 0 10px 50px rgba(0,0,0,0.5);
        }

        #suspectOptions {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin-top: 30px;
        }

        .close {
            color: var(--text-dim);
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: var(--accent-gold);
        }

        .suspect-option {
            background: rgba(26, 31, 58, 0.8);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .suspect-option:hover {
            border-color: var(--accent-gold);
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.3);
        }

        .suspect-option.selected {
            border-color: var(--accent-red);
            background: rgba(139, 0, 0, 0.3);
            box-shadow: 0 8px 20px rgba(139, 0, 0, 0.5);
        }

        .suspect-option-image {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 50%;
            border: 3px solid var(--border-color);
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .suspect-option:hover .suspect-option-image {
            border-color: var(--accent-gold);
        }

        .suspect-option.selected .suspect-option-image {
            border-color: var(--accent-red);
        }

        .suspect-option-name {
            font-size: 1.1em;
            font-weight: 600;
            color: var(--accent-gold);
            margin-bottom: 5px;
        }

        .suspect-option-role {
            font-size: 0.9em;
            color: var(--text-dim);
        }

        @media (max-width: 1200px) {
            #suspectOptions {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            #suspectOptions {
                grid-template-columns: repeat(2, 1fr);
            }

            .modal-content {
                padding: 20px;
            }
        }

        .submit-accusation {
            display: block;
            margin: 30px auto 0;
            padding: 15px 40px;
            background: linear-gradient(135deg, var(--accent-gold) 0%, #b8941f 100%);
            color: var(--primary-dark);
            border: none;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
        }

        .submit-accusation:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }

        .result-screen {
            display: none;
            text-align: center;
        }

        .result-title {
            font-family: 'Noto Serif JP', serif;
            font-size: 2.5em;
            margin-bottom: 30px;
        }

        .result-title.success {
            color: var(--accent-gold);
        }

        .result-title.failure {
            color: var(--accent-red);
        }

        .explanation {
            background: rgba(26, 31, 58, 0.8);
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            text-align: left;
            line-height: 2;
        }

        .explanation h3 {
            color: var(--accent-gold);
            margin: 20px 0 10px 0;
        }

        .timeline {
            background: rgba(10, 14, 39, 0.6);
            border-left: 3px solid var(--accent-gold);
            padding: 20px;
            margin: 20px 0;
        }

        .timeline-item {
            margin-bottom: 15px;
            padding-left: 20px;
            border-left: 2px solid var(--text-dim);
        }

        .scrollbar::-webkit-scrollbar {
            width: 8px;
        }

        .scrollbar::-webkit-scrollbar-track {
            background: rgba(26, 31, 58, 0.5);
            border-radius: 4px;
        }

        .scrollbar::-webkit-scrollbar-thumb {
            background: var(--accent-gold);
            border-radius: 4px;
        }

        .scrollbar::-webkit-scrollbar-thumb:hover {
            background: #b8941f;
        }

        /* Character Portrait */
        .character-portrait {
            width: 250px;
            height: auto;
            min-height: 200px;
            max-height: 350px;
            object-fit: cover;
            border-radius: 10px;
            border: 3px solid var(--accent-gold);
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            flex-shrink: 0;
        }

        .suspect-header {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
            align-items: stretch;
        }

        .suspect-header-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .suspect-header-info h2 {
            color: var(--accent-gold);
            margin-bottom: 20px;
            font-size: 2em;
        }

        .suspect-header-section {
            margin-bottom: 15px;
        }

        .suspect-header-section:last-child {
            margin-bottom: 0;
        }

        .suspect-header-section h3 {
            color: var(--accent-gold);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .suspect-header-section p {
            line-height: 1.8;
        }

        @media (max-width: 900px) {
            .suspect-header {
                flex-direction: column;
            }

            .character-portrait {
                width: 200px;
                height: 200px;
                margin: 0 auto;
            }
        }


        /* Evidence improvements */
        .evidence-category {
            margin-bottom: 25px;
        }

        .evidence-category-title {
            color: var(--accent-gold);
            font-size: 1em;
            font-weight: 600;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .evidence-count {
            background: var(--accent-gold);
            color: var(--primary-dark);
            font-size: 0.75em;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 700;
        }

        .evidence-item {
            background: rgba(26, 31, 58, 0.8);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            font-size: 0.9em;
            line-height: 1.6;
        }

        /* BGM Control Panel */
        .bgm-control {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: rgba(26, 31, 58, 0.95);
            backdrop-filter: blur(10px);
            border: 2px solid var(--border-color);
            border-radius: 15px;
            padding: 15px;
            z-index: 999;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        .bgm-control.collapsed {
            min-width: auto;
        }

        .bgm-control.expanded {
            min-width: 280px;
        }

        .bgm-control:hover {
            border-color: var(--accent-gold);
        }

        .bgm-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            user-select: none;
        }

        .bgm-title {
            font-size: 0.9em;
            color: var(--accent-gold);
            font-weight: 600;
            letter-spacing: 0.05em;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .bgm-toggle-icon {
            font-size: 0.8em;
            transition: transform 0.3s ease;
        }

        .bgm-control.expanded .bgm-toggle-icon {
            transform: rotate(180deg);
        }

        .bgm-now-playing {
            font-size: 0.85em;
            color: var(--text-dim);
            margin-top: 10px;
            font-style: italic;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .bgm-control.collapsed .bgm-now-playing {
            max-height: 0;
            margin-top: 0;
            opacity: 0;
        }

        .bgm-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .bgm-control.collapsed .bgm-controls {
            max-height: 0;
            margin-top: 0;
            padding-top: 0;
            opacity: 0;
        }

        .bgm-mute-btn {
            background: rgba(212, 175, 55, 0.2);
            border: 1px solid var(--accent-gold);
            color: var(--accent-gold);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 0.9em;
            white-space: nowrap;
        }

        .bgm-mute-btn:hover {
            background: rgba(212, 175, 55, 0.3);
            transform: translateY(-1px);
        }

        .bgm-mute-btn.muted {
            background: rgba(139, 0, 0, 0.3);
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .volume-control {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .volume-slider {
            flex: 1;
            -webkit-appearance: none;
            appearance: none;
            height: 6px;
            background: rgba(42, 47, 74, 0.8);
            border-radius: 3px;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            background: var(--accent-gold);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .volume-slider::-webkit-slider-thumb:hover {
            background: #b8941f;
            transform: scale(1.2);
        }

        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            background: var(--accent-gold);
            border-radius: 50%;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .volume-slider::-moz-range-thumb:hover {
            background: #b8941f;
            transform: scale(1.2);
        }

        .volume-label {
            font-size: 0.85em;
            color: var(--text-dim);
            min-width: 35px;
            text-align: right;
        }

        @media (max-width: 1200px) {
            .game-layout {
                grid-template-columns: 1fr;
            }

            .suspects-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            h1 {
                font-size: 2em;
            }

            .bgm-control {
                bottom: 15px;
                right: 15px;
                padding: 12px;
            }

            .bgm-control.expanded {
                min-width: 250px;
            }
        }

        @media (max-width: 768px) {
            .suspects-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .bgm-control.expanded {
                left: 15px;
                right: 15px;
                min-width: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Audio Elements -->
    <audio id="defaultBGM" loop>
        <source src="fukakai-nazo_Loopã®ã‚³ãƒ”ãƒ¼.ogg" type="audio/ogg">
    </audio>
    <audio id="accusationBGM">
        <source src="resolution-orã®ã‚³ãƒ”ãƒ¼.mp3" type="audio/mpeg">
    </audio>
    <audio id="clearBGM">
        <source src="æ „å…‰ã®ãƒ•ã‚¡ãƒ³ãƒ•ã‚¡ãƒ¼ãƒ¬ã®ã‚³ãƒ”ãƒ¼.mp3" type="audio/mpeg">
    </audio>

    <!-- BGM Control Panel -->
    <div class="bgm-control collapsed" id="bgmControl">
        <div class="bgm-header" onclick="toggleBGMPanel()">
            <span class="bgm-title">
                â™ª BGM
                <span class="bgm-toggle-icon">â–¼</span>
            </span>
        </div>
        <div class="bgm-now-playing" id="nowPlaying">æ·±æ€ªãªè¬</div>
        <div class="bgm-controls">
            <button class="bgm-mute-btn" id="muteBtn" onclick="toggleMute()">
                <span id="muteText">ğŸ”Š ON</span>
            </button>
            <div class="volume-control">
                <input type="range" min="0" max="100" value="50" class="volume-slider" id="volumeSlider">
                <span class="volume-label" id="volumeLabel">50%</span>
            </div>
        </div>
    </div>

    <div class="background-pattern"></div>
    <div class="container">
        <header>
            <h1>æ±äº¬ãƒŸãƒƒãƒ‰ãƒŠã‚¤ãƒˆæ®ºäººäº‹ä»¶</h1>
            <p class="subtitle">TOKYO MIDNIGHT MURDER</p>
        </header>

        <div class="intro-screen" id="introScreen">
            <div class="intro-content">
                <p>2025å¹´11æœˆ22æ—¥ã€åˆå¾Œ11æ™‚47åˆ†ã€‚</p>
                <p>æ±äº¬ãƒ»å…­æœ¬æœ¨ã®é«˜å±¤ãƒãƒ³ã‚·ãƒ§ãƒ³æœ€ä¸Šéšã«ã‚ã‚‹ãƒšãƒ³ãƒˆãƒã‚¦ã‚¹ã€‚ITä¼æ¥­ã®è‹¥ãçµŒå–¶è€…ã€<strong>ç›¸æ¾¤éš†ä¸€</strong>ï¼ˆ38æ­³ï¼‰ãŒè‡ªå®…ã§æ­»äº¡ã—ã¦ã„ã‚‹ã®ãŒç™ºè¦‹ã•ã‚ŒãŸã€‚</p>

                <div class="victim-info">
                    <p><strong>è¢«å®³è€…:</strong> ç›¸æ¾¤éš†ä¸€ï¼ˆã‚ã„ã–ã‚ ã‚Šã‚…ã†ã„ã¡ï¼‰</p>
                    <p><strong>æ­»äº¡æ¨å®šæ™‚åˆ»:</strong> åˆå¾Œ10æ™‚30åˆ†ã€œ11æ™‚00åˆ†</p>
                    <p><strong>æ­»å› :</strong> å¾Œé ­éƒ¨ã¸ã®éˆå™¨ã«ã‚ˆã‚‹å¼·æ‰“ã€‚å‡¶å™¨ã¯æœªç™ºè¦‹ã€‚</p>
                    <p><strong>ç™ºè¦‹çŠ¶æ³:</strong> æ›¸æ–ã«ã¦å€’ã‚Œã¦ã„ã‚‹ã¨ã“ã‚ã‚’ç§˜æ›¸ãŒç™ºè¦‹ã€‚çª“ã¯æ–½éŒ ã•ã‚Œã€ç„é–¢ã®é›»å­ãƒ­ãƒƒã‚¯ã«ã¯ä¸å¯©ãªè¨˜éŒ²ãªã—ã€‚</p>
                </div>

                <p>ãã®å¤œã€ç›¸æ¾¤ã®ãƒšãƒ³ãƒˆãƒã‚¦ã‚¹ã«ã¯5äººã®äººç‰©ãŒã„ãŸã€‚å…¨å“¡ã«ã‚¢ãƒªãƒã‚¤ãŒã‚ã‚Šã€å…¨å“¡ã«å‹•æ©ŸãŒã‚ã‚‹ã€‚</p>
                <p>ã‚ãªãŸã¯åˆ‘äº‹ã¨ã—ã¦ã€è¨¼æ‹ ã‚’é›†ã‚ã€çŸ›ç›¾ã‚’è¦‹ã¤ã‘å‡ºã—ã€çœŸçŠ¯äººã‚’ç‰¹å®šã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚</p>
                <p style="margin-top: 30px; color: var(--accent-gold); font-weight: 600;">æ³¨æ„: ã“ã®ã‚²ãƒ¼ãƒ ã¯é«˜åº¦ãªè«–ç†çš„æ€è€ƒã‚’è¦æ±‚ã—ã¾ã™ã€‚å…¨ã¦ã®è¨¼æ‹ ã¨è¨¼è¨€ã‚’æ³¨æ„æ·±ãæ¤œè¨¼ã—ã¦ãã ã•ã„ã€‚</p>

                <button class="start-btn" onclick="startGame()">æœæŸ»ã‚’é–‹å§‹ã™ã‚‹</button>
            </div>
        </div>

        <div class="game-screen" id="gameScreen">
            <div class="suspects-panel">
                <div class="panel-title">å®¹ç–‘è€…ãƒªã‚¹ãƒˆ</div>
                <div class="suspects-grid">
                    <div class="suspect-card" onclick="showSuspect(0)">
                        <div class="suspect-name">æ°´é‡ç¾å’²</div>
                        <div class="suspect-role">ç§˜æ›¸ãƒ»29æ­³</div>
                    </div>
                    <div class="suspect-card" onclick="showSuspect(1)">
                        <div class="suspect-name">ç›¸æ¾¤éº»è¡£</div>
                        <div class="suspect-role">å¦»ãƒ»34æ­³</div>
                    </div>
                    <div class="suspect-card" onclick="showSuspect(2)">
                        <div class="suspect-name">ç”°ä¸­å¥å¤ª</div>
                        <div class="suspect-role">ãƒ“ã‚¸ãƒã‚¹ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒ»42æ­³</div>
                    </div>
                    <div class="suspect-card" onclick="showSuspect(3)">
                        <div class="suspect-name">ä½è—¤å„ªå­</div>
                        <div class="suspect-role">å…ƒæ‹äººãƒ»31æ­³</div>
                    </div>
                    <div class="suspect-card" onclick="showSuspect(4)">
                        <div class="suspect-name">å±±æœ¬å¤§è¼”</div>
                        <div class="suspect-role">å¼Ÿãƒ»33æ­³</div>
                    </div>
                </div>
            </div>

            <div class="game-layout">
                <div class="main-panel" id="mainPanel">
                    <!-- å®¹ç–‘è€…è©³ç´°ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
                </div>

                <div class="right-panel">
                    <div class="evidence-panel scrollbar">
                        <div class="panel-title">åé›†ã—ãŸè¨¼æ‹ </div>

                        <div class="evidence-category">
                            <div class="evidence-category-title">
                                ğŸ“‹ åŸºæœ¬æƒ…å ±
                            </div>
                            <div class="evidence-item">
                                è¢«å®³è€…ã®è‡ªå®…ã¯32éšå»ºã¦ã®æœ€ä¸Šéšã€‚ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼ã¯æš—è¨¼ç•ªå·å¼ã§ã€ãã®å¤œã®ãƒ­ã‚°ã«ã¯5äººã®å®¹ç–‘è€…ã®ã¿ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã€‚
                            </div>
                            <div class="evidence-item">
                                æ›¸æ–ã®ãƒ‰ã‚¢ã¯å†…å´ã‹ã‚‰æ–½éŒ ã•ã‚Œã¦ã„ãªã‹ã£ãŸã€‚è¢«å®³è€…ã®ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã«ã¯åˆå¾Œ10æ™‚23åˆ†ã«ç€ä¿¡å±¥æ­´ã‚ã‚Šã€‚
                            </div>
                        </div>

                        <div id="evidenceList"></div>
                    </div>

                    <div class="accusation-panel">
                        <div class="panel-title">çŠ¯äººã‚’å‘Šç™ºã™ã‚‹</div>
                        <p style="font-size: 0.9em; margin-bottom: 15px; color: var(--text-dim);">å…¨ã¦ã®è¨¼æ‹ ã‚’æ¤œè¨¼ã—ã€çŠ¯äººã‚’ç‰¹å®šã—ã¦ãã ã•ã„ã€‚</p>
                        <button class="accusation-btn" onclick="openAccusationModal()">å‘Šç™ºã™ã‚‹</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="result-screen" id="resultScreen">
            <!-- çµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã‚‹ -->
        </div>
    </div>

    <div id="accusationModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeAccusationModal()">&times;</span>
            <h2 style="color: var(--accent-gold); margin-bottom: 30px;">çŠ¯äººã‚’å‘Šç™ºã™ã‚‹</h2>
            <p style="margin-bottom: 20px;">èª°ãŒçœŸçŠ¯äººã ã¨æ€ã„ã¾ã™ã‹?</p>
            <div id="suspectOptions"></div>
            <button class="submit-accusation" onclick="submitAccusation()">å‘Šç™ºã‚’ç¢ºå®šã™ã‚‹</button>
        </div>
    </div>

    <script>
        // ===== BGM Management =====
        const bgmTracks = {
            default: document.getElementById('defaultBGM'),
            accusation: document.getElementById('accusationBGM'),
            clear: document.getElementById('clearBGM')
        };

        const bgmNames = {
            default: 'æ·±æ€ªãªè¬',
            accusation: 'Resolution',
            clear: 'æ „å…‰ã®ãƒ•ã‚¡ãƒ³ãƒ•ã‚¡ãƒ¼ãƒ¬'
        };

        let currentBGM = null;
        let isMuted = false;
        let currentVolume = 0.5;

        // Initialize BGM system
        function initBGM() {
            // Load saved volume from localStorage
            const savedVolume = localStorage.getItem('bgm_volume');
            const savedMute = localStorage.getItem('bgm_mute');

            if (savedVolume !== null) {
                currentVolume = parseFloat(savedVolume);
                document.getElementById('volumeSlider').value = currentVolume * 100;
                document.getElementById('volumeLabel').textContent = Math.round(currentVolume * 100) + '%';
            }

            if (savedMute === 'true') {
                isMuted = true;
                document.getElementById('muteBtn').classList.add('muted');
                document.getElementById('muteText').textContent = 'ğŸ”‡ OFF';
            }

            // Set initial volume for all tracks
            Object.values(bgmTracks).forEach(audio => {
                audio.volume = isMuted ? 0 : currentVolume;
            });

            // Volume slider event
            document.getElementById('volumeSlider').addEventListener('input', function(e) {
                currentVolume = e.target.value / 100;
                document.getElementById('volumeLabel').textContent = e.target.value + '%';

                if (!isMuted) {
                    Object.values(bgmTracks).forEach(audio => {
                        audio.volume = currentVolume;
                    });
                }

                localStorage.setItem('bgm_volume', currentVolume);
            });
        }

        function toggleMute() {
            isMuted = !isMuted;
            const muteBtn = document.getElementById('muteBtn');
            const muteText = document.getElementById('muteText');

            if (isMuted) {
                muteBtn.classList.add('muted');
                muteText.textContent = 'ğŸ”‡ OFF';
                Object.values(bgmTracks).forEach(audio => {
                    audio.volume = 0;
                });
            } else {
                muteBtn.classList.remove('muted');
                muteText.textContent = 'ğŸ”Š ON';
                Object.values(bgmTracks).forEach(audio => {
                    audio.volume = currentVolume;
                });
            }

            localStorage.setItem('bgm_mute', isMuted);
        }

        function playBGM(bgmType, fadeIn = true) {
            const newBGM = bgmTracks[bgmType];

            // Update now playing text
            document.getElementById('nowPlaying').textContent = bgmNames[bgmType];

            // Stop current BGM with fade out
            if (currentBGM && currentBGM !== newBGM) {
                fadeOutBGM(currentBGM);
            }

            // Play new BGM
            currentBGM = newBGM;
            newBGM.currentTime = 0;

            if (fadeIn) {
                newBGM.volume = 0;
                newBGM.play().catch(err => console.log('BGM play failed:', err));
                fadeInBGM(newBGM);
            } else {
                newBGM.volume = isMuted ? 0 : currentVolume;
                newBGM.play().catch(err => console.log('BGM play failed:', err));
            }
        }

        function fadeInBGM(audio) {
            const targetVolume = isMuted ? 0 : currentVolume;
            const fadeStep = targetVolume / 20;
            let currentStep = 0;

            const fadeInterval = setInterval(() => {
                currentStep++;
                audio.volume = Math.min(fadeStep * currentStep, targetVolume);

                if (currentStep >= 20) {
                    clearInterval(fadeInterval);
                }
            }, 50);
        }

        function fadeOutBGM(audio) {
            const initialVolume = audio.volume;
            const fadeStep = initialVolume / 20;
            let currentStep = 0;

            const fadeInterval = setInterval(() => {
                currentStep++;
                audio.volume = Math.max(initialVolume - (fadeStep * currentStep), 0);

                if (currentStep >= 20) {
                    clearInterval(fadeInterval);
                    audio.pause();
                    audio.currentTime = 0;
                }
            }, 50);
        }

        function stopAllBGM() {
            Object.values(bgmTracks).forEach(audio => {
                audio.pause();
                audio.currentTime = 0;
            });
            currentBGM = null;
        }

        // Toggle BGM panel
        function toggleBGMPanel() {
            const panel = document.getElementById('bgmControl');
            const isCollapsed = panel.classList.contains('collapsed');

            if (isCollapsed) {
                panel.classList.remove('collapsed');
                panel.classList.add('expanded');
                localStorage.setItem('bgm_panel_state', 'expanded');
            } else {
                panel.classList.remove('expanded');
                panel.classList.add('collapsed');
                localStorage.setItem('bgm_panel_state', 'collapsed');
            }
        }

        // Initialize BGM on page load
        window.addEventListener('DOMContentLoaded', function() {
            initBGM();

            // Restore panel state
            const savedState = localStorage.getItem('bgm_panel_state');
            if (savedState === 'expanded') {
                const panel = document.getElementById('bgmControl');
                panel.classList.remove('collapsed');
                panel.classList.add('expanded');
            }
        });

        // ===== Game Logic =====
        const suspects = [
            {
                name: "æ°´é‡ç¾å’²",
                role: "ç§˜æ›¸ãƒ»29æ­³",
                image: "Mizuno.png",
                profile: "ç›¸æ¾¤ã®ç§˜æ›¸ã¨ã—ã¦3å¹´é–“å‹¤å‹™ã€‚æœ‰èƒ½ã§ä¿¡é ¼ã•ã‚Œã¦ã„ãŸãŒã€æœ€è¿‘ã¯éåº¦ãªè¦æ±‚ã«æ‚©ã‚“ã§ã„ãŸã€‚",
                motive: "ç›¸æ¾¤ã‹ã‚‰ã®ãƒ‘ãƒ¯ãƒãƒ©ã¨ã‚»ã‚¯ãƒãƒ©ã«é•·å¹´è‹¦ã—ã‚“ã§ã„ãŸã€‚å…ˆé€±ã€é€€è·ã‚’ç”³ã—å‡ºãŸãŒå´ä¸‹ã•ã‚Œã€ã€Œæ¥­ç•Œã§åƒã‘ãªãã—ã¦ã‚„ã‚‹ã€ã¨è„…ã•ã‚ŒãŸã€‚ã•ã‚‰ã«ã€ç›¸æ¾¤ãŒè‡ªåˆ†ã®ä¼ç”»ã‚’ç›—ç”¨ã—ã¦ç‰¹è¨±ç”³è«‹ã—ã¦ã„ãŸã“ã¨ã‚’çŸ¥ã‚Šã€æ¿€æ€’ã—ã¦ã„ãŸã€‚",
                alibi: "åˆå¾Œ10æ™‚ã‹ã‚‰10æ™‚25åˆ†ã¾ã§æ›¸æ–ã§ç›¸æ¾¤ã¨é¢è«‡ã€‚ãã®å¾Œã€ã‚­ãƒƒãƒãƒ³ã§ãŠèŒ¶ã‚’æ·¹ã‚Œã¦è‡ªå®¤ã¸ã€‚10æ™‚35åˆ†ã‹ã‚‰11æ™‚15åˆ†ã¾ã§è‡ªå®¤ã§é›»è©±ã‚’ã—ã¦ã„ãŸè¨˜éŒ²ã‚ã‚Šã€‚11æ™‚30åˆ†ã«æ›¸æ–ã‚’è¨ªã‚Œã€éºä½“ã‚’ç™ºè¦‹ã€‚",
                questions: [
                    {
                        q: "10æ™‚25åˆ†ã‹ã‚‰10æ™‚35åˆ†ã®é–“ã€ä½•ã‚’ã—ã¦ã„ã¾ã—ãŸã‹?",
                        a: "ã‚­ãƒƒãƒãƒ³ã§ãƒãƒ¼ãƒ–ãƒ†ã‚£ãƒ¼ã‚’æ·¹ã‚Œã¦ã„ã¾ã—ãŸã€‚ãã‚Œã‹ã‚‰è‡ªå®¤ã«æˆ»ã£ã¦ã€æ¯ã«é›»è©±ã‚’ã—ã¾ã—ãŸã€‚",
                        evidence: "ã‚­ãƒƒãƒãƒ³ã®é›»æ°—ã‚±ãƒˆãƒ«ä½¿ç”¨è¨˜éŒ²: 10æ™‚28åˆ†ã€‚æ°´é‡ã®ã‚¹ãƒãƒ›ã«10æ™‚35åˆ†ã‹ã‚‰11æ™‚15åˆ†ã¾ã§æ¯è¦ªã¸ã®ç™ºä¿¡è¨˜éŒ²ã€‚"
                    },
                    {
                        q: "æ›¸æ–ã§ã®é¢è«‡ã®å†…å®¹ã¯?",
                        a: "é€€è·ã®è©±ã§ã™ã€‚ã§ã‚‚ç›¸æ¾¤ã•ã‚“ã¯èãè€³ã‚’æŒãŸãš...ãã‚Œã©ã“ã‚ã‹ã€ç§ã®ä¼ç”»ã‚’å‹æ‰‹ã«ä½¿ã£ãŸã“ã¨ã‚’æŒ‡æ‘˜ã—ãŸã‚‰é€†ã‚®ãƒ¬ã•ã‚Œã¦ã€‚",
                        evidence: "ç›¸æ¾¤ã®PCã«æ°´é‡åç¾©ã®ä¼ç”»æ›¸ã¨ã€ç›¸æ¾¤åç¾©ã§æå‡ºã•ã‚ŒãŸé…·ä¼¼ã—ãŸç‰¹è¨±ç”³è«‹æ›¸é¡"
                    },
                    {
                        q: "è‡ªå®¤ã‹ã‚‰æ›¸æ–ã¸ã®è·é›¢ã¯?",
                        a: "å»Šä¸‹ã‚’æŒŸã‚“ã§å‘ã‹ã„å´ã§ã™ã€‚10ç§’ã‚‚ã‹ã‹ã‚Šã¾ã›ã‚“ã€‚ã§ã‚‚é›»è©±ä¸­ã§ã—ãŸã‹ã‚‰ã€è¡Œã‘ã‚‹ã‚ã‘ãŒã‚ã‚Šã¾ã›ã‚“ã€‚",
                        evidence: "é–“å–ã‚Šå›³ã«ã‚ˆã‚Šç¢ºèª: è‡ªå®¤ã¨æ›¸æ–ã¯å»Šä¸‹ã‚’æŒŸã‚“ã§å‘ã‹ã„å´ã€ç›´ç·šè·é›¢ã§ç´„8ãƒ¡ãƒ¼ãƒˆãƒ«"
                    }
                ]
            },
            {
                name: "ç›¸æ¾¤éº»è¡£",
                role: "å¦»ãƒ»34æ­³",
                image: "Aizawa.png",
                profile: "ç›¸æ¾¤ã¨çµå©šã—ã¦5å¹´ã€‚å…ƒãƒ¢ãƒ‡ãƒ«ã§ã€ç¾åœ¨ã¯ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’çµŒå–¶ã€‚å¤«å©¦ä»²ã¯å†·ãˆåˆ‡ã£ã¦ã„ãŸã€‚",
                motive: "å¤«ã®æµ®æ°—ç›¸æ‰‹ï¼ˆä½è—¤å„ªå­ï¼‰ã¨ã®é–¢ä¿‚ç¶™ç¶šã«æ¿€æ€’ã€‚ã•ã‚‰ã«ã€ç›¸æ¾¤ãŒéº»è¡£ã®ãƒ–ãƒ©ãƒ³ãƒ‰çµŒå–¶è³‡é‡‘ã‚’å‹æ‰‹ã«å¼•ãå‡ºã—ã€æŠ•è³‡ã«ä½¿ã„è¾¼ã‚“ã§ã„ãŸã“ã¨ãŒåˆ¤æ˜ã€‚é›¢å©šã™ã‚Œã°å€Ÿé‡‘ã ã‘ãŒæ®‹ã‚‹çŠ¶æ³ã ã£ãŸã€‚",
                alibi: "åˆå¾Œ9æ™‚ã‹ã‚‰10æ™‚15åˆ†ã¾ã§è‡ªå®¤ã§ãƒ“ãƒ‡ã‚ªé€šè©±ä¼šè­°ï¼ˆãƒ–ãƒ©ãƒ³ãƒ‰ã®æµ·å¤–ãƒã‚¤ãƒ¤ãƒ¼ã¨ï¼‰ã€‚10æ™‚20åˆ†é ƒã«ã‚­ãƒƒãƒãƒ³ã§è»½é£Ÿã‚’å–ã‚Šã€10æ™‚40åˆ†ã«è‡ªå®¤ã«æˆ»ã‚‹é€”ä¸­ã§ä½è—¤ã¨é­é‡ã€‚11æ™‚éãã«é¨’ãã‚’èã„ã¦æ›¸æ–ã¸ã€‚",
                questions: [
                    {
                        q: "ãƒ“ãƒ‡ã‚ªé€šè©±ã®ç›¸æ‰‹ã¯èª°ã§ã™ã‹?",
                        a: "ãƒ‘ãƒªã®ãƒã‚¤ãƒ¤ãƒ¼ã§ã™ã€‚æ–°ä½œã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã®å•†è«‡ã§ã—ãŸã€‚10æ™‚15åˆ†ã¾ã§ãšã£ã¨ç”»é¢ã®å‰ã«ã„ã¾ã—ãŸã€‚",
                        evidence: "éº»è¡£ã®ãƒãƒ¼ãƒˆPCã«9æ™‚02åˆ†ã‹ã‚‰10æ™‚16åˆ†ã¾ã§ãƒ“ãƒ‡ã‚ªä¼šè­°ã®è¨˜éŒ²ã€‚ç›¸æ‰‹ã¯ãƒ‘ãƒªã®å–å¼•å…ˆï¼ˆç¢ºèªæ¸ˆã¿ï¼‰"
                    },
                    {
                        q: "å¤«ã®ä½¿ã„è¾¼ã¿ã«ã¤ã„ã¦ã€ã„ã¤çŸ¥ã‚Šã¾ã—ãŸã‹?",
                        a: "...3æ—¥å‰ã§ã™ã€‚éŠ€è¡Œã‹ã‚‰é€£çµ¡ãŒæ¥ã¦ã€‚3000ä¸‡å††ãŒå‹æ‰‹ã«å¼•ãå‡ºã•ã‚Œã¦ã„ã¦...ã‚‚ã†ã€è¨±ã›ãªã‹ã£ãŸã€‚",
                        evidence: "éº»è¡£ã®äº‹æ¥­å£åº§ã‹ã‚‰10æ—¥å‰ã«3000ä¸‡å††ã®ä¸æ­£å‡ºé‡‘è¨˜éŒ²ã€‚ç›¸æ¾¤ã®æŠ•è³‡å£åº§ã¸ã®å…¥é‡‘ã¨ä¸€è‡´ã€‚"
                    },
                    {
                        q: "ã‚­ãƒƒãƒãƒ³ã«ã„ãŸæ™‚é–“ã¯?",
                        a: "10æ™‚20åˆ†ã‹ã‚‰30åˆ†ãã‚‰ã„ã¾ã§ã€‚ã‚µãƒ³ãƒ‰ã‚¤ãƒƒãƒã‚’ä½œã£ã¦é£Ÿã¹ã¾ã—ãŸã€‚ä½è—¤ã•ã‚“ã¨ä¼šã£ãŸã®ã¯æˆ»ã‚‹æ™‚ã§ã™ã€‚",
                        evidence: "ã‚­ãƒƒãƒãƒ³ã®ã‚·ãƒ³ã‚¯ã«10æ™‚25åˆ†é ƒä½¿ç”¨ã•ã‚ŒãŸå½¢è·¡ã®ã‚ã‚‹çš¿ã¨ãƒŠã‚¤ãƒ•"
                    }
                ]
            },
            {
                name: "ç”°ä¸­å¥å¤ª",
                role: "ãƒ“ã‚¸ãƒã‚¹ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒ»42æ­³",
                image: "Tanaka.png",
                profile: "ç›¸æ¾¤ã¨å…±åŒã§äº‹æ¥­ã‚’ç«‹ã¡ä¸Šã’ãŸå…±åŒçµŒå–¶è€…ã€‚æœ€è¿‘ã€çµŒå–¶æ–¹é‡ã‚’å·¡ã£ã¦å¯¾ç«‹ã—ã¦ã„ãŸã€‚",
                motive: "ç›¸æ¾¤ãŒä¼šç¤¾ã®è³‡é‡‘ã‚’ç§çš„ã«æµç”¨ã—ã€ä¼šç¤¾ã‚’å€’ç”£å¯¸å‰ã«è¿½ã„è¾¼ã‚“ã§ã„ãŸã€‚ç”°ä¸­ã®å…¨è²¡ç”£ã‚‚ä¼šç¤¾ã«æŠ•ã˜ã¦ãŠã‚Šã€ã“ã®ã¾ã¾ã§ã¯è‡ªå·±ç ´ç”£ç¢ºå®Ÿã€‚ç›¸æ¾¤ã‚’æ­¢ã‚ã‚‹æ–¹æ³•ã¯ä»–ã«ãªã‹ã£ãŸã€‚",
                alibi: "åˆå¾Œ9æ™‚30åˆ†åˆ°ç€ã€‚10æ™‚ã¾ã§æ›¸æ–ã§ç›¸æ¾¤ã¨æ¿€ã—ãå£è«–ã€‚ãã®å¾Œã‚²ã‚¹ãƒˆãƒ«ãƒ¼ãƒ ã§è³‡æ–™æ•´ç†ã€‚10æ™‚50åˆ†é ƒã€å±±æœ¬ãŒãƒªãƒ“ãƒ³ã‚°ã«ã„ã‚‹ã®ã‚’ç›®æ’ƒã€‚11æ™‚10åˆ†é ƒã«æ°´é‡ã¨ã™ã‚Œé•ã†ã€‚",
                questions: [
                    {
                        q: "10æ™‚ã‹ã‚‰11æ™‚10åˆ†ã¾ã§ã€ãšã£ã¨ã‚²ã‚¹ãƒˆãƒ«ãƒ¼ãƒ ã«?",
                        a: "ã¯ã„ã€‚ä¼šè­°ã®è³‡æ–™ã‚’æ•´ç†ã—ã¦ã„ã¾ã—ãŸ...ã¨ã„ã†ã‚ˆã‚Šã€æ€’ã‚Šã‚’é®ã‚ã‚‹ãŸã‚ã«æ™‚é–“ãŒå¿…è¦ã ã£ãŸã‚“ã§ã™ã€‚",
                        evidence: "ã‚²ã‚¹ãƒˆãƒ«ãƒ¼ãƒ ã®ãƒ‡ã‚¹ã‚¯ã«æ•£ã‚‰ã°ã£ãŸä¼šè­°è³‡æ–™ã€‚ç”°ä¸­ã®æŒ‡ç´‹å¤šæ•°ã€‚"
                    },
                    {
                        q: "å£è«–ã®å†…å®¹ã¯?",
                        a: "è³‡é‡‘ã®ä½¿ã„è¾¼ã¿ã§ã™ã€‚ä¼šç¤¾ã®é‡‘ã‚’å‹æ‰‹ã«æŠ•è³‡ã«å›ã—ã¦ã€ã‚‚ã†é‹è»¢è³‡é‡‘ã‚‚ãªã„ã€‚æ¥æœˆã®çµ¦æ–™ã‚‚æ‰•ãˆãªã„çŠ¶æ³ãªã‚“ã§ã™ã€‚",
                        evidence: "ä¼šç¤¾ã®å¸³ç°¿ã«ä¸æ˜ç­ãªå‡ºé‡‘ãŒè¤‡æ•°ã€‚ç·é¡8000ä¸‡å††ä»¥ä¸ŠãŒè¡Œæ–¹ä¸æ˜ã€‚"
                    },
                    {
                        q: "ã‚²ã‚¹ãƒˆãƒ«ãƒ¼ãƒ ã‹ã‚‰æ›¸æ–ã¸ã®è·é›¢ã¯?",
                        a: "å»Šä¸‹ã®åå¯¾å´ã§ã™ã€‚15ãƒ¡ãƒ¼ãƒˆãƒ«ãã‚‰ã„ã§ã—ã‚‡ã†ã‹ã€‚ã§ã‚‚ç§ã¯éƒ¨å±‹ã‹ã‚‰å‡ºã¦ã„ã¾ã›ã‚“ã€‚",
                        evidence: "é–“å–ã‚Šå›³ã«ã‚ˆã‚Šç¢ºèª: ã‚²ã‚¹ãƒˆãƒ«ãƒ¼ãƒ ã¨æ›¸æ–ã¯å»Šä¸‹ã‚’æŒŸã‚“ã§å¯¾è§’ã€ç´„15ãƒ¡ãƒ¼ãƒˆãƒ«"
                    }
                ]
            },
            {
                name: "ä½è—¤å„ªå­",
                role: "å…ƒæ‹äººãƒ»31æ­³",
                image: "Sato.png",
                profile: "ç›¸æ¾¤ã®å¤§å­¦æ™‚ä»£ã®æ‹äººã€‚5å¹´å‰ã«ç›¸æ¾¤ãŒéº»è¡£ã¨çµå©šã—ãŸã“ã¨ã§åˆ¥ã‚ŒãŸãŒã€æœ€è¿‘å†ã³æ¥è§¦ã—ã¦ã„ãŸã€‚",
                motive: "ç›¸æ¾¤ã«ã€Œé›¢å©šã—ã¦ä¸€ç·’ã«ãªã‚ã†ã€ã¨è¨€ã‚ã‚Œã€2å¹´é–“é–¢ä¿‚ã‚’ç¶šã‘ã¦ã„ãŸã€‚ã—ã‹ã—å…ˆé€±ã€ç›¸æ¾¤ãŒä»–ã®å¥³æ€§ã¨ã‚‚äºŒè‚¡ã—ã¦ã„ãŸã“ã¨ãŒåˆ¤æ˜ã€‚ã™ã¹ã¦ãŒå˜˜ã ã£ãŸã¨çŸ¥ã‚Šã€äººç”Ÿã‚’å¥ªã‚ã‚ŒãŸæ€’ã‚ŠãŒçˆ†ç™ºã€‚",
                alibi: "åˆå¾Œ10æ™‚åˆ°ç€ã€‚ç›¸æ¾¤ã‹ã‚‰ã€Œä»Šå¤œè©±ãŒã‚ã‚‹ã€ã¨å‘¼ã°ã‚Œã¦ã„ãŸã€‚ã—ã‹ã—æ›¸æ–ã‹ã‚‰ã¯è©±ã—å£°ãŒèã“ãˆã€å»Šä¸‹ã§10æ™‚25åˆ†é ƒã¾ã§å¾…æ©Ÿã€‚ãã®å¾Œãƒªãƒ“ãƒ³ã‚°ã«ç§»å‹•ã—ã€é›‘èªŒã‚’èª­ã‚€ã€‚10æ™‚40åˆ†é ƒã‚­ãƒƒãƒãƒ³ã§éº»è¡£ã¨é­é‡ã—æ°—ã¾ãšã„æ€ã„ã‚’ã™ã‚‹ã€‚",
                questions: [
                    {
                        q: "å»Šä¸‹ã§å¾…ã£ã¦ã„ã‚‹é–“ã€ä½•ã‹èã“ãˆã¾ã—ãŸã‹?",
                        a: "ç›¸æ¾¤ã•ã‚“ã¨æ°´é‡ã•ã‚“ã®å£°ã§ã—ãŸã€‚ã‹ãªã‚Šæ¿€ã—ã„å£èª¿ã§...10æ™‚25åˆ†é ƒã€æ°´é‡ã•ã‚“ãŒæ€’ã£ãŸæ§˜å­ã§å‡ºã¦è¡Œãã¾ã—ãŸã€‚",
                        evidence: "æ›¸æ–ã®ãƒ‰ã‚¢ä»˜è¿‘ã®é˜²çŠ¯ã‚«ãƒ¡ãƒ©ã«10æ™‚24åˆ†ã€æ°´é‡ãŒæ›¸æ–ã‚’å‡ºã‚‹å§¿ãŒè¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹"
                    },
                    {
                        q: "ç›¸æ¾¤ã•ã‚“ã«å‘¼ã°ã‚ŒãŸç†ç”±ã¯?",
                        a: "ã€Œå¤§äº‹ãªè©±ã€ã¨ã—ã‹...ã§ã‚‚ä»Šæ€ãˆã°ã€åˆ¥ã‚Œè©±ã ã£ãŸã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ç§ã€ç”¨æ¸ˆã¿ã ã£ãŸã‚“ã§ã™ã€‚",
                        evidence: "ä½è—¤ã®ã‚¹ãƒãƒ›ã«åˆå¾Œ8æ™‚50åˆ†ã®ç›¸æ¾¤ã‹ã‚‰ã®ãƒ¡ãƒ¼ãƒ«ã€Œä»Šå¤œ10æ™‚ã€è©±ãŒã‚ã‚‹ã€‚ã“ã‚ŒãŒæœ€å¾Œã ã€"
                    },
                    {
                        q: "æ°´é‡ã•ã‚“ãŒå‡ºãŸå¾Œã€æ›¸æ–ã«ã¯å…¥ã‚Šã¾ã›ã‚“ã§ã—ãŸã‹?",
                        a: "ã„ãˆ...ãƒãƒƒã‚¯ã—ã¾ã—ãŸãŒè¿”äº‹ãŒãªãã¦ã€‚æ€’ã£ã¦ã„ã‚‹ã‚“ã ã¨æ€ã£ã¦ã€ãƒªãƒ“ãƒ³ã‚°ã§å¾…ã¤ã“ã¨ã«ã—ã¾ã—ãŸã€‚",
                        evidence: "æ›¸æ–ã®ãƒ‰ã‚¢ãƒãƒ–ã«ä½è—¤ã®æŒ‡ç´‹ãªã—ï¼ˆãƒãƒƒã‚¯ã®ã¿ã§è§¦ã‚Œã¦ã„ãªã„è¨¼æ‹ ï¼‰"
                    }
                ]
            },
            {
                name: "å±±æœ¬å¤§è¼”",
                role: "å¼Ÿãƒ»33æ­³",
                image: "Yamamoto.png",
                profile: "ç›¸æ¾¤ã®ç¾©ç†ã®å¼Ÿï¼ˆéº»è¡£ã®å®Ÿå¼Ÿï¼‰ã€‚ç›¸æ¾¤ã®ä¼šç¤¾ã§åƒã„ã¦ã„ã‚‹ãŒã€èƒ½åŠ›ä¸è¶³ã‚’ç†ç”±ã«å†·é‡ã•ã‚Œã¦ã„ãŸã€‚",
                motive: "ç›¸æ¾¤ã‹ã‚‰æ¨ªé ˜ã®æ¿¡ã‚Œè¡£ã‚’ç€ã›ã‚‰ã‚Œã€åˆ‘äº‹å‘Šè¨´ã™ã‚‹ã¨è„…ã•ã‚Œã¦ã„ãŸã€‚å®Ÿéš›ã«ã¯ç›¸æ¾¤è‡ªèº«ãŒä¼šç¤¾ã®é‡‘ã‚’ä½¿ã„è¾¼ã¿ã€ãã®è²¬ä»»ã‚’å±±æœ¬ã«æŠ¼ã—ä»˜ã‘ã‚ˆã†ã¨ã—ã¦ã„ãŸã€‚ã“ã®ã¾ã¾ã§ã¯åˆ‘å‹™æ‰€è¡Œãã¨ã„ã†çµ¶æœ›çš„çŠ¶æ³ã€‚",
                alibi: "åˆå¾Œ9æ™‚45åˆ†åˆ°ç€ã€‚10æ™‚ã¾ã§æ›¸æ–ã§ç›¸æ¾¤ã¨æ¿€è«–ã€‚ãã®å¾Œãƒãƒ«ã‚³ãƒ‹ãƒ¼ã§ã‚¿ãƒã‚³ã‚’å¸ã„ãªãŒã‚‰æ€’ã‚Šã‚’é®ã‚ã‚‹ã€‚10æ™‚35åˆ†é ƒãƒªãƒ“ãƒ³ã‚°ã«æˆ»ã‚Šã€ã‚½ãƒ•ã‚¡ã§æ™‚é–“ã‚’æ½°ã™ã€‚10æ™‚50åˆ†é ƒã€ç”°ä¸­ã«ç›®æ’ƒã•ã‚Œã‚‹ã€‚",
                questions: [
                    {
                        q: "ãƒãƒ«ã‚³ãƒ‹ãƒ¼ã«ã¯èª°ã‹ã„ã¾ã—ãŸã‹?",
                        a: "ã„ãˆã€ä¸€äººã§ã—ãŸã€‚ã‚¿ãƒã‚³ã‚’4æœ¬å¸ã£ã¦...æœ¬æ°—ã§é£›ã³é™ã‚Šã‚ˆã†ã‹ã¨æ€ã„ã¾ã—ãŸã€‚",
                        evidence: "ãƒãƒ«ã‚³ãƒ‹ãƒ¼ã®ç°çš¿ã«æ–°ã—ã„å¸ã„æ®»4æœ¬ï¼ˆå±±æœ¬ã®å¸ã£ã¦ã„ã‚‹éŠ˜æŸ„ï¼‰ã€‚æ™‚é–“çš„ã«10æ™‚ã‹ã‚‰10æ™‚35åˆ†ã®é–“ã¨æ¨å®šã€‚"
                    },
                    {
                        q: "æ›¸æ–ã§ã®å£è«–ã®å†…å®¹ã¯?",
                        a: "æ¨ªé ˜ã®æ¿¡ã‚Œè¡£ã§ã™ã€‚ã‚„ã£ã¦ã‚‚ã„ãªã„ã“ã¨ã§å‘Šè¨´ã•ã‚Œã‚‹...å§‰ã«ã‚‚ç›¸è«‡ã—ã¾ã—ãŸãŒã€ç›¸æ‰‹ã«ã•ã‚Œãšã€‚ã‚‚ã†é€ƒã’å ´ãŒãªã‹ã£ãŸã€‚",
                        evidence: "ç›¸æ¾¤ã®ã‚¹ãƒãƒ›ã«å¼è­·å£«ã¨ã®ãƒ¡ãƒ¼ãƒ«è¨˜éŒ²ã€Œå±±æœ¬ã‚’æ¨ªé ˜ã§å‘Šè¨´ã™ã‚‹æº–å‚™ã‚’ã€"
                    },
                    {
                        q: "10æ™‚ã«æ›¸æ–ã‚’å‡ºãŸå¾Œã€æˆ»ã‚Šã¾ã›ã‚“ã§ã—ãŸã‹?",
                        a: "ãƒãƒ«ã‚³ãƒ‹ãƒ¼ã«è¡Œãæ™‚ã€å»Šä¸‹ã‚’é€šã‚Šã¾ã—ãŸãŒ...æ›¸æ–ã®ãƒ‰ã‚¢ã¯é–‰ã¾ã£ã¦ã„ã¾ã—ãŸã€‚ã‚‚ã†äºŒåº¦ã¨é¡”ã‚‚è¦‹ãŸããªã‹ã£ãŸã€‚",
                        evidence: "ãƒãƒ«ã‚³ãƒ‹ãƒ¼ã¸ã®å‹•ç·šã¯æ›¸æ–ã®å‰ã‚’é€šã‚‹ã€‚é˜²çŠ¯ã‚«ãƒ¡ãƒ©ã«10æ™‚02åˆ†ã€å±±æœ¬ãŒå»Šä¸‹ã‚’é€šéã™ã‚‹å§¿ã‚ã‚Š"
                    }
                ]
            }
        ];

        let collectedEvidence = [];
        let evidenceBySuspect = {
            0: [], // æ°´é‡ç¾å’²
            1: [], // ç›¸æ¾¤éº»è¡£
            2: [], // ç”°ä¸­å¥å¤ª
            3: [], // ä½è—¤å„ªå­
            4: []  // å±±æœ¬å¤§è¼”
        };
        let selectedSuspect = null;
        let currentSuspect = 0;

        const murdererId = 0; // çœŸçŠ¯äºº

        function startGame() {
            document.getElementById('introScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            showSuspect(0);

            // Start default BGM
            playBGM('default', true);
        }

        function showSuspect(index) {
            currentSuspect = index;
            const cards = document.querySelectorAll('.suspects-grid .suspect-card');
            cards.forEach((card, i) => {
                card.classList.toggle('active', i === index);
            });

            const suspect = suspects[index];
            const mainPanel = document.getElementById('mainPanel');

            let questionsHTML = '';
            suspect.questions.forEach((q, i) => {
                questionsHTML += `
                    <div style="margin-bottom: 20px;">
                        <button class="question-btn" onclick="askQuestion(${index}, ${i})" id="q${index}_${i}">
                            è³ªå•: ${q.q}
                        </button>
                        <div class="answer-box" id="a${index}_${i}">
                            <p><strong>å›ç­”:</strong> ${q.a}</p>
                        </div>
                    </div>
                `;
            });

            mainPanel.innerHTML = `
                <div class="suspect-detail active">
                    <div class="suspect-header">
                        <img src="${suspect.image}" alt="${suspect.name}" class="character-portrait">
                        <div class="suspect-header-info">
                            <h2>${suspect.name}</h2>

                            <div class="suspect-header-section">
                                <h3>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h3>
                                <p>${suspect.profile}</p>
                            </div>

                            <div class="suspect-header-section">
                                <h3>å‹•æ©Ÿ</h3>
                                <p style="color: var(--accent-red);">${suspect.motive}</p>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>ã‚¢ãƒªãƒã‚¤</h3>
                        <div class="alibi-box">
                            ${suspect.alibi}
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>å°‹å•</h3>
                        ${questionsHTML}
                    </div>
                </div>
            `;
        }

        function askQuestion(suspectIndex, questionIndex) {
            const answerBox = document.getElementById(`a${suspectIndex}_${questionIndex}`);
            const button = document.getElementById(`q${suspectIndex}_${questionIndex}`);

            answerBox.classList.add('show');
            button.disabled = true;

            const evidence = suspects[suspectIndex].questions[questionIndex].evidence;
            if (evidence) {
                addEvidence(evidence, suspectIndex);
            }
        }

        function addEvidence(evidenceText, suspectIndex) {
            if (collectedEvidence.includes(evidenceText)) return;

            collectedEvidence.push(evidenceText);
            evidenceBySuspect[suspectIndex].push(evidenceText);

            updateEvidenceDisplay();
        }

        function updateEvidenceDisplay() {
            const evidenceList = document.getElementById('evidenceList');
            evidenceList.innerHTML = '';

            // Display evidence by suspect
            suspects.forEach((suspect, index) => {
                if (evidenceBySuspect[index].length > 0) {
                    const category = document.createElement('div');
                    category.className = 'evidence-category';

                    let evidenceHTML = '';
                    evidenceBySuspect[index].forEach((evidence, i) => {
                        const isNew = collectedEvidence[collectedEvidence.length - 1] === evidence;
                        evidenceHTML += `
                            <div class="evidence-item ${isNew ? 'new' : ''}">
                                ${evidence}
                            </div>
                        `;
                    });

                    category.innerHTML = `
                        <div class="evidence-category-title">
                            ğŸ” ${suspect.name}
                            <span class="evidence-count">${evidenceBySuspect[index].length}</span>
                        </div>
                        ${evidenceHTML}
                    `;
                    evidenceList.appendChild(category);

                    // Remove 'new' class after animation
                    setTimeout(() => {
                        category.querySelectorAll('.evidence-item.new').forEach(item => {
                            item.classList.remove('new');
                        });
                    }, 3000);
                }
            });
        }

        function openAccusationModal() {
            const modal = document.getElementById('accusationModal');
            const optionsDiv = document.getElementById('suspectOptions');

            optionsDiv.innerHTML = '';
            suspects.forEach((suspect, index) => {
                const option = document.createElement('div');
                option.className = 'suspect-option';
                option.onclick = () => selectSuspectForAccusation(index);
                option.id = `option${index}`;
                option.innerHTML = `
                    <img src="${suspect.image}" alt="${suspect.name}" class="suspect-option-image">
                    <div class="suspect-option-name">${suspect.name}</div>
                    <div class="suspect-option-role">${suspect.role}</div>
                `;
                optionsDiv.appendChild(option);
            });

            modal.style.display = 'block';

            // Switch to accusation BGM
            playBGM('accusation', true);
        }

        function closeAccusationModal() {
            document.getElementById('accusationModal').style.display = 'none';
            selectedSuspect = null;

            // Return to default BGM
            playBGM('default', true);
        }

        function selectSuspectForAccusation(index) {
            selectedSuspect = index;
            document.querySelectorAll('.suspect-option').forEach((option, i) => {
                option.classList.toggle('selected', i === index);
            });
        }

        function submitAccusation() {
            if (selectedSuspect === null) {
                alert('å®¹ç–‘è€…ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            // Save the selected suspect before closing modal
            const accusedIndex = selectedSuspect;
            closeAccusationModal();
            showResult(accusedIndex === murdererId, accusedIndex);
        }

        function showResult(isCorrect, accusedIndex) {
            console.log('showResult called:', isCorrect, 'accusedIndex:', accusedIndex);
            document.getElementById('gameScreen').style.display = 'none';
            const resultScreen = document.getElementById('resultScreen');
            resultScreen.style.display = 'block';

            if (isCorrect) {
                // Play clear BGM on success
                playBGM('clear', true);
                resultScreen.innerHTML = `
                    <div class="intro-screen">
                        <h2 class="result-title success">äº‹ä»¶è§£æ±º</h2>
                        <div class="explanation">
                            <p style="font-size: 1.2em; text-align: center; margin-bottom: 30px;">
                                çŠ¯äººã¯<strong style="color: var(--accent-gold);">æ°´é‡ç¾å’²</strong>ã§ã—ãŸã€‚
                            </p>

                            <h3>çœŸç›¸</h3>
                            <p>æ°´é‡ã«ã¯10æ™‚35åˆ†ã‹ã‚‰ã®é›»è©±è¨˜éŒ²ã¨ã„ã†å®Œç’§ãªã‚¢ãƒªãƒã‚¤ãŒã‚ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã‚Œã“ããŒå·§å¦™ãªãƒˆãƒªãƒƒã‚¯ã ã£ãŸã®ã§ã™ã€‚</p>

                            <div class="timeline">
                                <div class="timeline-item">
                                    <strong>10:00-10:25</strong> - æ›¸æ–ã§ç›¸æ¾¤ã¨é¢è«‡ã€‚ä¼ç”»ç›—ç”¨ã‚’å•ã„è©°ã‚ã‚‹ãŒé€†ã‚®ãƒ¬ã•ã‚Œã€æ¿€æ€’ã€‚
                                </div>
                                <div class="timeline-item">
                                    <strong>10:25</strong> - æ›¸æ–ã‚’å‡ºãŸå¾Œã€ã‚­ãƒƒãƒãƒ³ã¸ã€‚ã—ã‹ã—å®Ÿéš›ã«ã¯ãŠèŒ¶ã‚’æ·¹ã‚Œãšã€ã™ãæ›¸æ–ã«å¼•ãè¿”ã™ã€‚
                                </div>
                                <div class="timeline-item">
                                    <strong>10:27</strong> - æ›¸æ–ã§ç›¸æ¾¤ã‚’è¥²æ’ƒã€‚å‡¶å™¨ã¯æ›¸æ–ã«ã‚ã£ãŸé‡åšãªã‚¬ãƒ©ã‚¹è£½ã®æ–‡é®ã€‚å¾Œé ­éƒ¨ã‚’ä¸€æ’ƒã§æ®´æ‰“ã€‚
                                </div>
                                <div class="timeline-item">
                                    <strong>10:28</strong> - æ€¥ã„ã§ã‚­ãƒƒãƒãƒ³ã«æˆ»ã‚Šã€é›»æ°—ã‚±ãƒˆãƒ«ã®ã‚¹ã‚¤ãƒƒãƒã‚’å…¥ã‚Œã‚‹ï¼ˆä½¿ç”¨è¨˜éŒ²10:28åˆ†ï¼‰ã€‚ã‚¢ãƒªãƒã‚¤ä½œã‚Šã€‚
                                </div>
                                <div class="timeline-item">
                                    <strong>10:30</strong> - å‡¶å™¨ã‚’è‡ªå®¤ã®ã‚¯ãƒ­ãƒ¼ã‚¼ãƒƒãƒˆå¥¥ã«éš ã™ã€‚æ‰‹ã‚’æ´—ã„ã€è½ã¡ç€ãã€‚
                                </div>
                                <div class="timeline-item">
                                    <strong>10:35-11:15</strong> - è‡ªå®¤ã‹ã‚‰æ¯è¦ªã«é›»è©±ã€‚é•·é›»è©±ã‚’ã™ã‚‹ã“ã¨ã§å®Œç’§ãªã‚¢ãƒªãƒã‚¤ã‚’æ§‹ç¯‰ã€‚
                                </div>
                            </div>

                            <h3>æ±ºå®šçš„ãªè¨¼æ‹ </h3>
                            <p>æ°´é‡ã®ãƒˆãƒªãƒƒã‚¯ã‚’æš´ãæ±ºå®šçš„ãªçŸ›ç›¾ç‚¹:</p>
                            <ul style="margin-left: 30px; line-height: 2;">
                                <li><strong>é›»æ°—ã‚±ãƒˆãƒ«ã®çŸ›ç›¾:</strong> 10æ™‚28åˆ†ã«ä½¿ç”¨è¨˜éŒ²ãŒã‚ã‚‹ãŒã€å®Ÿéš›ã«ãŠèŒ¶ã¯æ·¹ã‚Œã‚‰ã‚Œã¦ã„ãªã„ã€‚ã‚«ãƒƒãƒ—ã«è§¦ã‚ŒãŸå½¢è·¡ãªã—ã€‚</li>
                                <li><strong>æ™‚é–“çš„ä½™è£•:</strong> æ›¸æ–ã‚’å‡ºãŸ10:25ã‹ã‚‰é›»è©±é–‹å§‹ã®10:35ã¾ã§10åˆ†é–“ã€‚ã“ã®é–“ã«çŠ¯è¡Œã¨è¨¼æ‹ éš æ»…ãŒå¯èƒ½ã€‚</li>
                                <li><strong>è‡ªå®¤ã¨æ›¸æ–ã®è¿‘ã•:</strong> ã‚ãšã‹8ãƒ¡ãƒ¼ãƒˆãƒ«ã€‚å¾€å¾©20ç§’ã§è¡Œãæ¥ã§ãã‚‹è·é›¢ã€‚</li>
                                <li><strong>ä½è—¤ã®è¨¼è¨€:</strong> 10:24åˆ†ã«æ°´é‡ãŒã€Œæ€’ã£ãŸæ§˜å­ã§ã€æ›¸æ–ã‚’å‡ºãŸã®ã‚’ç›®æ’ƒã€‚ã—ã‹ã—æ°´é‡ã¯ã€Œç©ã‚„ã‹ã«ãŠèŒ¶ã‚’æ·¹ã‚Œã«è¡Œã£ãŸã€ã¨è¨¼è¨€ã€‚çŸ›ç›¾ã—ã¦ã„ã‚‹ã€‚</li>
                                <li><strong>é›»è©±ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°:</strong> ãªãœ10:35ã¨ã„ã†ä¸­é€”åŠç«¯ãªæ™‚é–“ã«é›»è©±? å®Ÿã¯çŠ¯è¡Œå¾Œã«è¨¼æ‹ ã‚’æ•´ç†ã—ã€è½ã¡ç€ã„ã¦ã‹ã‚‰é›»è©±ã—ãŸãŸã‚ã€‚</li>
                            </ul>

                            <h3>å‹•æ©Ÿ</h3>
                            <p>3å¹´é–“ã®ãƒ‘ãƒ¯ãƒãƒ©ãƒ»ã‚»ã‚¯ãƒãƒ©ã«åŠ ãˆã€æ°´é‡ãŒæ™‚é–“ã‚’ã‹ã‘ã¦é–‹ç™ºã—ãŸä¼ç”»ã‚’ç›¸æ¾¤ãŒç›—ç”¨ã—ã€è‡ªåˆ†ã®åå‰ã§ç‰¹è¨±ç”³è«‹ã—ã¦ã„ãŸã€‚ã“ã‚Œã¯æ°´é‡ã®ã‚­ãƒ£ãƒªã‚¢ã¨å°†æ¥ã‚’å¥ªã†è¡Œç‚ºã§ã—ãŸã€‚é€€è·ã‚‚è„…è¿«ã«ã‚ˆã‚Šæ‹’å¦ã•ã‚Œã€è¿½ã„è©°ã‚ã‚‰ã‚ŒãŸæ°´é‡ã¯ã€è¡å‹•çš„ã«çŠ¯è¡Œã«åŠã‚“ã ã®ã§ã™ã€‚</p>

                            <h3>ãã®ä»–ã®å®¹ç–‘è€…ã«ã¤ã„ã¦</h3>
                            <p><strong>ç›¸æ¾¤éº»è¡£:</strong> 10:15ã¾ã§ãƒ“ãƒ‡ã‚ªä¼šè­°ä¸­ã€‚ç”»é¢ã«æ˜ ã£ã¦ãŠã‚Šã€ç‰©ç†çš„ã«ä¸å¯èƒ½ã€‚</p>
                            <p><strong>ç”°ä¸­å¥å¤ª:</strong> 10æ™‚ä»¥é™ã‚²ã‚¹ãƒˆãƒ«ãƒ¼ãƒ ã«ãŠã‚Šã€æ›¸æ–ã¸ã®å¾€å¾©ã‚’èª°ã«ã‚‚ç›®æ’ƒã•ã‚Œã¦ã„ãªã„ã€‚ã—ã‹ã—æ±ºå®šçš„ãªè¨¼æ‹ ãŒãªã„ã€‚</p>
                            <p><strong>ä½è—¤å„ªå­:</strong> å»Šä¸‹ã§æ°´é‡ã‚’ç›®æ’ƒå¾Œã€ãƒªãƒ“ãƒ³ã‚°ã¸ç§»å‹•ã€‚æ›¸æ–ã«ã¯å…¥ã£ã¦ã„ãªã„è¨¼æ‹ ã‚ã‚Šã€‚</p>
                            <p><strong>å±±æœ¬å¤§è¼”:</strong> 10:02ã«ãƒãƒ«ã‚³ãƒ‹ãƒ¼ã¸å‘ã‹ã†å§¿ãŒé˜²çŠ¯ã‚«ãƒ¡ãƒ©ã«è¨˜éŒ²ã€‚ãã®å¾Œãƒãƒ«ã‚³ãƒ‹ãƒ¼ã§35åˆ†é–“éã”ã™ã€‚</p>
                        </div>

                        <button class="start-btn" onclick="location.reload()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
                    </div>
                `;
            } else {
                // Return to default BGM on failure
                playBGM('default', true);

                const accused = suspects[accusedIndex];
                console.log('Failure case - accused:', accused, 'index:', accusedIndex);
                const reasonHTML = getInnocenceReason(accusedIndex);
                console.log('Reason HTML:', reasonHTML);

                resultScreen.innerHTML = `
                    <div class="intro-screen">
                        <h2 class="result-title failure">èª¤èªé€®æ•</h2>
                        <div class="explanation">
                            <p style="font-size: 1.2em; text-align: center; margin-bottom: 30px; color: var(--accent-red);">
                                <strong>${accused.name}</strong>ã¯çŠ¯äººã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
                            </p>

                            <h3>${accused.name}ãŒçŠ¯äººã§ã¯ãªã„ç†ç”±</h3>
                            ${getInnocenceReason(accusedIndex)}

                            <p style="margin-top: 30px; color: var(--text-dim);">
                                ã‚‚ã†ä¸€åº¦ã€å…¨ã¦ã®è¨¼æ‹ ã¨è¨¼è¨€ã‚’æ³¨æ„æ·±ãæ¤œè¨¼ã—ã¦ã¿ã¦ãã ã•ã„ã€‚çœŸå®Ÿã¯ç´°éƒ¨ã«éš ã‚Œã¦ã„ã¾ã™ã€‚
                            </p>

                            <div style="background: rgba(139, 0, 0, 0.2); border: 2px solid var(--accent-red); border-radius: 10px; padding: 25px; margin-top: 30px; text-align: center;">
                                <p style="font-size: 1.1em; font-weight: 600; margin-bottom: 15px; color: var(--accent-red);">
                                    æœæŸ»å¤±æ•—
                                </p>
                                <p style="line-height: 1.8; margin-bottom: 0;">
                                    èª¤ã£ãŸå‘Šç™ºã«ã‚ˆã‚Šã€çœŸçŠ¯äººã«é€ƒèµ°ã®æ™‚é–“ã‚’ä¸ãˆã¦ã—ã¾ã£ãŸã€‚<br>
                                    äº‹ä»¶ã¯è¿·å®®å…¥ã‚Šã¨ãªã‚Šã€ç›¸æ¾¤éš†ä¸€ã®æ­»ã®çœŸç›¸ã¯é—‡ã«è‘¬ã‚‰ã‚Œã‚‹ã“ã¨ã¨ãªã‚‹...
                                </p>
                            </div>
                        </div>

                        <div style="display: flex; gap: 20px; justify-content: center; margin-top: 30px;">
                            <button class="start-btn" onclick="returnToHome()" style="background: linear-gradient(135deg, var(--border-color) 0%, var(--secondary-dark) 100%);">
                                ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹
                            </button>
                            <button class="start-btn" onclick="location.reload()">
                                ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦ã™ã‚‹
                            </button>
                        </div>
                    </div>
                `;
            }
        }

        function returnToHome() {
            // Stop all BGM
            stopAllBGM();

            // Show intro screen
            document.getElementById('resultScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('introScreen').style.display = 'block';

            // Reset game state
            collectedEvidence = [];
            evidenceBySuspect = {
                0: [],
                1: [],
                2: [],
                3: [],
                4: []
            };
            selectedSuspect = null;
            currentSuspect = 0;
        }

        function getInnocenceReason(suspectIndex) {
            console.log('getInnocenceReason called with index:', suspectIndex);
            const reasons = [
                null, // æ°´é‡ï¼ˆçœŸçŠ¯äººï¼‰
                `<p>ç›¸æ¾¤éº»è¡£ã¯9æ™‚02åˆ†ã‹ã‚‰10æ™‚16åˆ†ã¾ã§ã€ãƒ‘ãƒªã®ãƒã‚¤ãƒ¤ãƒ¼ã¨ãƒ“ãƒ‡ã‚ªä¼šè­°ä¸­ã§ã—ãŸã€‚ç›¸æ‰‹å´ã®è¨˜éŒ²ã§ã‚‚ç¢ºèªã•ã‚Œã¦ãŠã‚Šã€ç”»é¢ã«æ˜ ã‚Šç¶šã‘ã¦ã„ãŸãŸã‚ã€ç‰©ç†çš„ã«çŠ¯è¡Œã¯ä¸å¯èƒ½ã§ã™ã€‚æ¨å®šæ­»äº¡æ™‚åˆ»ã®10:27é ƒã€å½¼å¥³ã¯ç¢ºå®Ÿã«è‡ªå®¤ã®PCç”»é¢ã®å‰ã«ã„ã¾ã—ãŸã€‚</p>
                <p>ã•ã‚‰ã«ã€10æ™‚20åˆ†ã‹ã‚‰ã‚­ãƒƒãƒãƒ³ã§è»½é£Ÿã‚’å–ã£ã¦ã„ãŸè¨¼æ‹ ã‚‚ã‚ã‚Šã€ã“ã®æ™‚ç‚¹ã§ç›¸æ¾¤ã¯ã™ã§ã«æ­»äº¡ã—ã¦ã„ãŸå¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚</p>`,
                `<p>ç”°ä¸­å¥å¤ªã¯ç¢ºã‹ã«ç›¸æ¾¤ã¨æ¿€ã—ãå¯¾ç«‹ã—ã¦ã„ã¾ã—ãŸãŒã€10æ™‚ä»¥é™ã¯ã‚²ã‚¹ãƒˆãƒ«ãƒ¼ãƒ ã«ã„ãŸã¨è¨¼è¨€ã—ã¦ã„ã¾ã™ã€‚ã¾ãŸã€æ±ºå®šçš„ãªç‰©çš„è¨¼æ‹ ãŒã‚ã‚Šã¾ã›ã‚“ã€‚å‹•æ©Ÿã¯å¼·ã„ã‚‚ã®ã®ã€çŠ¯è¡Œæ™‚åˆ»ã®ã‚¢ãƒªãƒã‚¤ã‚’å®Œå…¨ã«å¦å®šã™ã‚‹è¨¼æ‹ ãŒãªã„ãŸã‚ã€æœ‰ç½ªã¨ã™ã‚‹ã«ã¯ä¸ååˆ†ã§ã™ã€‚</p>
                <p>ãŸã ã—ã€æœ€ã‚‚ç–‘ã‚ã—ã„äººç‰©ã®ä¸€äººã§ã‚ã‚‹ã“ã¨ã¯é–“é•ã„ã‚ã‚Šã¾ã›ã‚“ã€‚</p>`,
                `<p>ä½è—¤å„ªå­ã¯10æ™‚24åˆ†ã«æ°´é‡ãŒæ›¸æ–ã‹ã‚‰ã€Œæ€’ã£ãŸæ§˜å­ã§ã€å‡ºã¦ãã‚‹ã®ã‚’å»Šä¸‹ã§ç›®æ’ƒã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯é‡è¦ãªè¨¼è¨€ã§ã™ã€‚ãã®å¾Œã€ä½è—¤ã¯æ›¸æ–ã®ãƒ‰ã‚¢ãƒãƒ–ã«è§¦ã‚ŒãŸå½¢è·¡ã‚‚ãªãï¼ˆæŒ‡ç´‹ãªã—ï¼‰ã€ãƒªãƒ“ãƒ³ã‚°ã«ç§»å‹•ã—ã¦ã„ã¾ã™ã€‚</p>
                <p>10æ™‚40åˆ†ã«ã¯ã‚­ãƒƒãƒãƒ³ã§éº»è¡£ã¨é­é‡ã—ã¦ãŠã‚Šã€ã“ã®é–“ã«æ›¸æ–ã«å…¥ã‚‹æ©Ÿä¼šã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ç‰©ç†çš„ã«çŠ¯è¡Œã¯ä¸å¯èƒ½ã§ã™ã€‚</p>`,
                `<p>å±±æœ¬å¤§è¼”ã¯10æ™‚02åˆ†ã«é˜²çŠ¯ã‚«ãƒ¡ãƒ©ã«è¨˜éŒ²ã•ã‚Œã¦ãŠã‚Šã€ãã®å¾Œãƒãƒ«ã‚³ãƒ‹ãƒ¼ã§10æ™‚35åˆ†é ƒã¾ã§ã‚¿ãƒã‚³ã‚’å¸ã£ã¦ã„ã¾ã—ãŸã€‚ç°çš¿ã«ã¯å¸ã„æ®»4æœ¬ãŒã‚ã‚Šã€è¨¼è¨€ã¨ä¸€è‡´ã—ã¾ã™ã€‚</p>
                <p>ãƒãƒ«ã‚³ãƒ‹ãƒ¼ã‹ã‚‰æ›¸æ–ã¸ã¯å¾€å¾©ã§æœ€ä½ã§ã‚‚1åˆ†ä»¥ä¸Šã‹ã‹ã‚Šã€ãã®é–“ã«èª°ã‹ã«ç›®æ’ƒã•ã‚Œã‚‹ãƒªã‚¹ã‚¯ãŒé«˜ã™ãã¾ã™ã€‚ã¾ãŸã€æˆ»ã£ã¦ããŸæ™‚ã«ç”°ä¸­ã«ç›®æ’ƒã•ã‚Œã¦ãŠã‚Šã€ç‰©ç†çš„ã«çŠ¯è¡Œã®æ™‚é–“ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>`
            ];

            const result = reasons[suspectIndex] || '<p>è¨¼æ‹ ãŒä¸ååˆ†ã§ã™ã€‚</p>';
            console.log('Returning reason:', result);
            return result;
        }
    </script>
</body>
</html>